import { jsx as _jsx } from "preact/jsx-runtime";
import { h } from "preact";
import { useEffect, useState } from "preact/hooks";
import { preventTreeShake } from "@lincode/utils";
import TreeItem from "./TreeItem";
import Object3DTreeItem from "./Object3DTreeItem";
preventTreeShake(h);
const ModelTreeItem = ({ appendable, level }) => {
    const [loaded, setLoaded] = useState();
    //@ts-ignore
    const { loadedResolvable } = appendable;
    useEffect(() => {
        setLoaded(undefined);
        //@ts-ignore
        const handle = loadedResolvable.then(() => setLoaded(appendable.loadedGroup.children[0]));
        return () => {
            handle.cancel();
        };
    }, [loadedResolvable]);
    return (_jsx(TreeItem, { appendable: appendable, level: level, children: loaded && _jsx(Object3DTreeItem, { appendable: appendable, level: level + 1, object3d: loaded }) }));
};
export default ModelTreeItem;
